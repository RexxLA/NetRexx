-- RuleSet.nrx

package org.vpad.extra.workspace

options binary strictcase


class RuleSet extends Vector

  method RuleSet(array = Rule[])
    loop i = 0 for array.length
      addElement(array[i])
    end

  method rewrite(stmt, set = Hashtable)
    loop i = 0 for this.size
      r = Rule elementAt(i)
      if r.match(stmt) then do
        if set.get(r) = null then
          set.put(r, this)
        return r.apply(stmt)
      end
    end
    return stmt
