\chapter{Parse instruction}\label{refparse}
\index{PARSE,instruction}
\index{Instructions,PARSE}
\index{Parsing templates,in PARSE instruction}
\index{Templates, parsing,in PARSE instruction}
\index{R\textsc{exx},class/use by PARSE}
\begin{shaded}
\begin{alltt}
\textbf{parse} \emph{term} \emph{template};

where \emph{template} is one or more non-numeric \emph{symbol}s
separated by blanks and/or \emph{pattern}s, and a \emph{pattern} is one of:

    \emph{literalstring}
    [\emph{indicator}] \emph{number}
    [\emph{indicator}] (\emph{symbol})

and \emph{indicator} is one of \textbf{+}, \textbf{-}, or \textbf{=}.
\end{alltt}
\end{shaded}
 The \keyword{parse} instruction is used to assign characters (from a
string) to one or more variables according to the rules and templates
described in the section \emph{Parsing templates} (see page \pageref{refparsing}).
\index{Variables,parsing of}
\index{Terms,parsing of}
 
The value of the \emph{term} is expected to be a string; if it is
not a string, it will be converted to a string.
 
Any variables used in the \emph{template} are named by non-numeric
\emph{symbol}s (that is, they cannot be an array reference or other
term); they refer to a variable or property in the current class.
Any values that are used in patterns during the parse are converted to
strings before use.
 
Any variables set by the \keyword{parse} instruction must have a known
string type, or are given the \nr{} string type, \textbf{R\textsc{exx}}, if
they are new.
 
The term itself is not changed unless it is a variable which also
appears in the template and whose value is changed by being in the
template.

\textbf{Example:}
\begin{alltt}
parse wordlist word1 wordlist
\end{alltt}
In this idiomatic example, the first word is removed
from \textbf{wordlist} and is assigned to the
variable \textbf{word1}, and the remainder is assigned back
to \textbf{wordlist}.

\textbf{Notes:}
\begin{enumerate}
\item 
The special words \keyword{ask}, \keyword{source}, and \keyword{version},
as described in the section  \emph{Special names and methods}(see page \pageref{refspecial}), allow:
\begin{alltt}
parse ask x     -- parses a line from input stream
parse source x  -- parses 'Java method \emph{filename}'
parse version x -- parses '\nr{} \emph{version} \emph{date}'
\end{alltt}
These special words may also be used within expressions.
\item 
Similarly, it is recommended that the initial (main) method in a
stand-alone application place the command string passed to it in a
variable called \textbf{arg}.
\footnote{
\emph{In the reference implementation, this is automatic if
the \textbf{main} method is generated by the \nr{} language
processor.}
}
 
If this is done, the instruction:
\begin{alltt}
parse arg template
\end{alltt}
will work, in a stand-alone application, in the same way as in R\textsc{exx}
(even though \textbf{arg} is not a keyword in this case).
\footnote{
Note, though, that the command string may have been edited by the
environment; certain characters may not be allowed, multiple blanks may
have been reduced to single blanks, \emph{etc.}
}
\end{enumerate}
