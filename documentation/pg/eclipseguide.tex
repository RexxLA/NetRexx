\chapter{Using Eclipse for NetRexx Development}\label{setupeclipse}
 
This is a guide for first time Eclipse users to set up a NetRexx
development project.  It is not a beginners guide to Eclipse, but is
intended to explain how to download the NetRexx compiler source from
SVN to be able to modify and build it using Eclipse\footnote{If you
  have questions or comments, feel free to contact Bill Fenlason at billfen@hvc.rr.com.}.
 
It is detailed and hopefully foolproof for someone who has never used
Eclipse.  It assumes a Windows user, but if you are a Linux or Mac
user, you will no doubt understand what to do.
 
This guide is for Eclipse 4.2 (Juno), written August, 2012.  New
Eclipse releases occur every 4 months, so there may be differences
depending on what the current version is.
 
\section{Downloading Eclipse}
 
There are many different preconfigured versions of Eclipse.  As you
become more experienced with it you may wish to use a different
distribution, but the one specified here makes some things simple.  It
does contain some things that you may never use.
\begin{enumerate}
\item Make a new folder for the project.  Name it appropriately
   (e.g. EclipseNetRexx)
\item Browse to eclipse.org, and click on ``Download''.
\item Download the version named ECLIPSE IDE FOR JAVA DEVELOPERS for your
   your operating system.
\item The download is about 150 MB.
\item Unzip the downloaded file into your project folder.
\end{enumerate}
\section{Setting up the workspace}
 
There are different strategies for managing Eclipse workspaces.
Eclipse defaults to putting the workspace in your Windows documents
folder - probably not what you want to do.  The following is perhaps
the most simple way.
\begin{enumerate}
\item Open the project folder.  It will now contain a folder named
   eclipse.
\item Add a new folder named ``workspace'' in the project folder to go
along with the eclipse folder.
\item Open the eclipse folder, and create a shortcut to eclipse.exe.
\item Move the shortcut to the desktop and rename it to something like
   ``Eclipse NetRexx''.
\item Close the project folder, and double click the shortcut to start
   Eclipse.
\item The ``Select a workspace'' dialog comes up - don't use the default.
\item Browse to the workspace folder that you just created and select it.
\item Click (check) the ``Use this as the default'' box, and click OK.
\end{enumerate}
\section{Shellshock}
 
If you have never used Eclipse, it can be a bit overwhelming.  It is
rather complicated, and has endless options, etc.  In addition there
are at least a thousand different plugins.
 
You will be greeted by a Welcome screen - you may find it interesting
or boring.  Exit from it via tback to the welcome screen from: Main Menu -> Help -> Welcome.
 
\section{Installing Git}
 
Modern versions of Eclipse come with Git support built in. If not,
install it from the Eclipse Marketplace.

\section{Downloading the NetRexx project from the SVN repository}
 
The Git repository on SourceForge contains the NetRexx compiler/translator,
documentation, examples, etc.  These instructions assume you want only
the compiler project.
\begin{enumerate}
\item The NetRexx Git repository clobe command is:
            \url{git clone git://git.code.sf.net/p/netrexx/code netrexx-code}
\item Copy it (for pasting) from above, or get it from the kenai or
            netrexx.org site.
\end{enumerate}

\section{Setting up the builds}
 
Ant support is built into Eclipse, but it must be configured to be
able to access the bootstrap NetRexx compiler.
\begin{enumerate}
\item Double click on the build.xml file name in the package explorer.
   Note that its icon is an ant.
\item The build file will open in an editor window.
\item Right click in the window to bring up a context menu, and select
   Run As -> 2 Ant Build
\item Do NOT select 1 Ant Build.
\item The Ant configuration dialog comes up - it will show you all the
   targets, etc.
\item Click on the Classpath tab, and then click on User Entries.
\item Now click on Add External Jars to bring up the Jar Selection
   dialog.
\item Navigate to the lib folder in the project folder.  Make sure you
   are not in the build folder.
\item Double click on NetRexxC.jar to select it.
\item Click on the Refresh tab, and check the Refresh resources on
   completion box.
\item Click Run to build the distribution.  The messages will appear in
   the console listing below.
\item The java doc step may fail.
\item Close the build.xml file (X on the tab).
\end{enumerate}
You can configure the ant build by using the configuration dialog in
Run As -> 2 Ant Build.  You may want to check ``compile'' and ``jars''
to run those steps.  Use Apply to save the configuration.
 
There are two different builds.  The second build.xml file is in the
project -> tools -> ant-task folder.
Open it up and repeat the above steps for that build.xml file.  Each
build file has its own ant configuration, and once set selecting Run
As -> 1 Ant Build will run it.  Or just hit F11.
 
\section{Using the NetRexx version of the NetRexx Ant task}
 
The above process uses the standard NetRexx Ant task, not the new
one.  To use the new one:
\begin{enumerate}
\item Main Menu -> Window -> Preferences -> Ant -> Runtime.
\item Open up and select Ant Home Entries.  Then click on Add External
Jars
\item Navigate to the lib folder in the project and select
ant-netrexx.jar
\item The jar will appear at the bottom of the list.
\item Use the UP button to move it up (ahead) of the apache ant version,
click OK
\end{enumerate}

\section{Setting up the Eclipse NetRexx Editor Plugin (Optional)}
 
The NetRexx Editor plugin provides syntax coloring and error checking
for nrx files, as well as one click compiling and translating.

\begin{enumerate}
\item Click on Main Menu -> Help -> Eclipse MarketPlace.
\item Type NetRexx in the search box and hit enter.
\item Click the Install button next to the Eclipse NetRexx package.
\item Click Next, Accept the License, Finish, OK to unsigned content, and
Yes to restart Eclipse.
\item Click Main Menu -> Window -> Preferences -> NetRexx Editor to explore it
\end{enumerate}
