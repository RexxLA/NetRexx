.* ------------------------------------------------------------------
.* NetRexx User's Guide                                              mfc
.* Copyright (c) IBM Corporation 1996, 2000.  All Rights Reserved.
.* ------------------------------------------------------------------
:h2 id=injpp.Installing for Visual J++
.pi /Visual J++ installation
.pi /J++ installation
.pi /installation/J++

(Many thanks to Bill Potvin and Bernhard Hurzeler for the details in
this section.)

Here's how to install NetRexx for use with Visual J++:
:ol.
:li.
Copy the following file into the [java&underscore.root]:m.\Lib:em. directory:
\end{verbatim}
NetRexxC.jar
:exmp.
For example, if [java&underscore.root] is at :m.E:\Java:em.:
\end{verbatim}
C:\>copy NetRexxC.jar E:\Java\Lib
:exmp.
.* - - -
:li.
Similarly, copy the :m.nrc.bat:em. and :m.NetRexxC.bat:em. files to the
[java&underscore.root]:m.\Bin:em. directory.
.* - - -
:li.
Add the jar file explicitly to the CLASSPATH:
\end{verbatim}
C:\>set CLASSPATH=%CLASSPATH%;[java&underscore.root]\Lib\NetRexxC.jar;
:exmp.
For example, if [java&underscore.root] is :m.E:\Java:em., your CLASSPATH
might then look like this:
\end{verbatim}
CLASSPATH=E:\Java\Lib;E:\Java\TrustLib;E:\Java\Lib\NetRexxC.jar;
:exmp.

Under Windows NT 4.0 and Windows 2000 this can be done using Start,
Settings, Control Panel, System, Environment tab, System Variables, and
clicking on CLASSPATH.
:eol.
.* =====
:h4.Using NetRexx with Visual J++

Using NetRexx with J++ is very similar to using it with other Java
development kits; the main difference is in the command names:
:ol.
:li.
Use the J++ :m.jview:em. command to invoke the NetRexx translator to
convert a NetRexx program (&eg., :m.hello.nrx:em.) into a Java program
(:m.hello.java:em.).

Note that some versions of the jview package do not provide
a :m.classes.zip:em. file by default, but the NetRexx compiler needs
this to determine information about classes that you use.  If this is
the case, you will get a \emph{class not found} error
for :m.java.lang.Object:em..  In this case, run the command
\end{verbatim}
clspack -auto
:exmp.
from an MS-DOS prompt to create the :m.classes.zip:em. file.

When running the NetRexx compiler, you must specify
the :m.-nocompile:em. option to NetRexx in order to prevent it from
trying to invoke the Java toolkit compiler :m.javac:em. (which isn't in
the MicroSoft J++ classes).

For example, if :m.hello.nrx:em. is in the current directory:
\end{verbatim}
jview COM.ibm.netrexx.process.NetRexxC hello -nocompile
:exmp.
The result of this step should be a Java source file
called :m.hello.java:em..
.* - - - - -
:li.
Use the J++ jvc command to compile the Java source file:
\end{verbatim}
jvc hello.java
:exmp.
The result of this step should be a Java class file
called :m.hello.class:em..
.* - - - - -
:li.
Execute the class file with the J++ command :m.jview:em.:
\end{verbatim}
jview hello
:exmp.
.* - - - - -
:li.
Note that some earlier versions of :m.jview:em. fail with an exception
(an :m.ArrayIndexOutOfBoundsException:em. in RexxUtil.translate) when
compiling :m.hello.nrx:em..  This is due to a bug in the jview JIT;
:fn.
Just In Time compiler.
:efn.
the workaround is to turn the JIT off.
:eol.

Note that all the commands above probably have to be typed exactly as
shown (Java is very case-sensitive).  The supplied :m.NetRexxC.bat:em.
can be modified to work with the above commands by using :m.jview:em.
instead of the :m.java:em. command and adding the :m.jvc:em. step.
